# docker-compose.yml otimizado para stream + an√°lise com YOLO
services:
  nginx:
    image: tiangolo/nginx-rtmp:latest
    container_name: nginx_rtmp_yolo
    restart: unless-stopped
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./stream:/hls/live
    ports:
      - "1935:1935"
      - "8081:8081"
    deploy:
      resources:
        limits:
          cpus: "0.8"
          memory: 512M
        reservations:
          cpus: "0.3"
          memory: 256M
    environment:
      - NGINX_WORKER_PROCESSES=auto
      - NGINX_WORKER_CONNECTIONS=4096
